# `lowerDepeg` wrongly handles `swapExactTokensForTokens` potentially leading to admins unable to lowerDepeg

## Impact

The use of [lowerDepeg](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L1080-L1124) by admins to lower the peg on `dpxETH` can result in a critical issue. Presently, the function lacks handling for `swapExactTokensForTokens`, which may lead to reverts, rendering admins incapable of effectively lowering the peg.

## Proof of Concept

[swapExactTokensForTokens](https://docs.uniswap.org/contracts/v2/reference/smart-contracts/router-02#swapexacttokensfortokens), as indicated by UniSwap, returns a `uint[]`. However, the current code [extracts only the first uint](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L1097).

```jsx
amountOfWethOut = IUniswapV2Router(addresses.dopexAMMRouter)
```

Upon deeper inspection of Uni's code, starting with [UniswapV2Router02](https://github.com/Uniswap/v2-periphery/blob/master/contracts/UniswapV2Router02.sol#L231) and proceeding to [UniswapV2Library](https://github.com/Uniswap/v2-periphery/blob/master/contracts/libraries/UniswapV2Library.sol#L62-L70), it's apparent that this array comprises **amountIn** followed by **amountOut**. Thus, the extraction [here](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L1097) solely yields **amountIn** but **not amountOut**.

This complication extends to the [curve swap](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L1112-L1117), where the use of `amountOfWethOut` could likely trigger a revert on curve's end, rendering the function useless.

## Tools Used

Manual review

## Recommended Mitigation Steps
Simple code fix:

```diff
-      amountOfWethOut = IUniswapV2Router(addresses.dopexAMMRouter)
+      (, amountOfWethOut) = IUniswapV2Router(addresses.dopexAMMRouter)
        .swapExactTokensForTokens(
          _rdpxAmount,
          minamountOfWeth,
          path,
          address(this),
          block.timestamp + 10
        )[path.length - 1];
```